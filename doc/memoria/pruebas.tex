\par
En el diseño de este proyecto, se han seguido diversas prácticas própias de las metodologías ágiles. Destaca la utilización del diseño dirigido por pruebas (TDD). 
\par
Siguiendo esta práctica, se ha procedido al diseño de las pruebas simultaneamente o incluso con anterioridad al diseño. Se han automatizado las pruebas, de modo que a cada pequeño incremento que se introduce en el sistema, se pueden repetir todas las pruebas, no dando como bueno cada cambio hasta que absolutamente todas las pruebas sean superadas. Las pruebas de caja blanca \footnote{Pruebas de caja blanca: metodología de prueba que se basa en las estructuras de control del diseño procedimental para generar los casos de prueba que, garanticen que se recorren por lo menos una vez todos los caminos independientes de cada módulo, que se ejecutan todas las decisiones lógicas en su parte verdadera y en su parte falsa, se recorren todos los bucles.} carecen de sentido cuando se emplea la práctica del diseño dirigido por pruebas(las pruebas deben ser independientes y anteriores a la implementación de las clases y a los cambios que en ellas se pueden hacer) por lo que no se ha realizado ningún cálculo de complejidad ciclomática \footnote{Complejidad ciclomática:  medida cuantitativa de la complejidad lógica de un programa que define el número de caminos independientes del conjunto básico de un módulo y por tanto nos proporciona una cota superior del número máximo de pruebas que se han de realizar para garantizar que cada sentencia se ejecuta al menos una vez}. El TDD se entiende mejor con las pruebas de caja negra\footnote{Pruebas de caja negra: pruebas que se llevan a cabo sobre la interfaz del software, para probar su funcionalidad, donde los casos de prueba pretenden demostrar que las funciones del software se verifican, que la entrada se acepta de forma adecuada y que se produce una salida correcta, así como que la integridad de la información externa se mantiene.}, pues las pruebas de caja negra examinan los aspectos del modelo fundamental del sistema sin tener mucho en cuenta la estructura lógica interna del software, al diseñarse a priori, estos aspectos no se conocen aún. 
\par
Esta práctica no solamente garantiza resultados correctos, sino que, además, permite realizar cualquier tipo de mejora con una cierta tranquilidad, al contar con estas pruebas a modo de 'red de seguridad'.
\par
Y no debemos olvidar en ningún momento que, las ventajas que esta práctica aportan no son solo para este proyecto, sino que podrán ser reutilizables para futuras fases del proyecto global, y en futuras lineas de desarrollo.
\par
Para ampliar información sobre el diseño dirigido por pruebas ver \cite{tdd}, y para ampliar sobre conceptos generales, o más propios de las metodologías clásicas ver \cite{pressman}.

\subsection{Diseño de las pruebas}
\par
Las pruebas deberán cumplir unos determinados criterios para su correcto diseño. A partir de estos criterios se determinarán los casos de prueba.
\par
\subsubsection{Criterios para el diseño de las pruebas}
\par
Para el diseño de las pruebas se tiene en cuenta el cumplimiento de los siguientes criterios a nivel funcional:
\par
\begin{itemize}
	\item Se debe poder crear usuarios.
	\item Se debe poder crear tickets (issues).
	\item Se debe poder leer tickets.
	\item Se debe poder asignar tickets.
	\item Se debe poder acceder a los adjuntos.
	\item Solo el administrador puede admitir usuarios.
	\item Solo los usuarios registrados pueden crear tickets. 
	\item Solo los usuarios registrados pueden asignar tickets. 
	\item Solo los usuarios registrados pueden acceder a los adjuntos. 
\end{itemize}
\par
Además los casos de prueba deberán comprobar otros factores como:
\begin{itemize}
	\item Se puede acceder al sistema.
	\item La interfaz es válida.
	\item El idioma es válido.
	\item Funciona en las plataformas descritas.
\end{itemize}
\par
\subsubsection{Casos de prueba}\label{casos}
\par
Para realizar las pruebas se levantará el servicio y se lanzarán contra su interfaz en tiempo de ejecución (como se explicará más adelante), de modo que cada  prueba funcional que hagamos, estará probando a la vez los otros factores que describíamos. Por tanto, y por los la propia metodología de prueba usada, los casos de prueba se plantearán desde un punto de vista funcional. 
\par
Dividiremos los casos de prueba en grupos:
\par
\begin{enumerate}
	\item \textbf{Pruebas de Acceso Administrador.} En primer lugar se determinarán los casos de prueba que determinene como correctos los accesos en modo administrador. Su importancia hace que se separe de los casos de prueba de accesos para otros usuarios. Los casos de prueba contemplados serán los siguientes:
\begin{itemize}
	\item Un administrador puede acceder como administrador con contraseña correcta
	\item No se puede acceder como administrador con una contraseña incorrecta
	\item No se puede acceder como administrador con una contraseña nula
	\item No se puede acceder sin login y password 
\end{itemize}
	\item \textbf{Pruebas de Administración.} En este grupo se comprueba que el usuario administrador puede hacer las labores propias del administrador.
\begin{itemize}
	\item Un administrador puede listar clases
	\item Un administrador puede listar usuarios
	\item Un administrador puede crear un usuario
	\item Se puede crear más de un usuario
	\item No se puede crear un usuario ya existente.
	\item Un administrador puede editar un usuario
\end{itemize}
	\item \textbf{Pruebas de Usuario. }Se deberá comprobar que un usuario puede acceder y realizar las acciones propias de un usuario pero no de administrador.
\begin{itemize}
	\item Un usuario puede acceder, y accede como usuario no admiinistrador (no se contempla el acceso con contraseña incorrecta o sin contraseña, pues eso queda ya comprobado en el caso del administrador)
	\item Un usuario no puede listar clases
	\item Un usuario sí puede listar usuarios
	\item Un usuario no puede crear usuarios
\end{itemize}
	\item \textbf{Pruebas de creación de Issues}
\begin{itemize}
	\item Un usuario puede crear un issue.
	\item Un usuario puede crear otro issue.
	\item Otro usuario puede ver los issues creados.
\end{itemize}
	\item \textbf{Pruebas de manipulación de Issues}
\begin{itemize}
	\item Un usuario puede reasignar un issue
	\item Un usuario puede cambiar la prioridad de un issue
	\item Un usuario puede cambiar el estado de un issue
	\item Un usuario puede cambiar el contenido de un issue
	\item Un usuario puede examinar todas las acciones realizadas con un issue
\end{itemize}
\end{enumerate}
En base a esos casos, las pruebas se han automatizado en base a lo que se indica en el siguiente punto.
\subsection{Automatización de las pruebas}
Se ha optado por el empleo de SELENIUM IDE\footnote{SELENIUM IDE: herramienta para automatizar pruebas para aplicaciones web, que funciona directamente sobre el internet browser (navegador de internet). Para más información, ver \cite{selenium}} para a realización de las pruebas. Esta herramienta comprueba si ante determinadas entradas que hagamos sobre la interfaz web, la salida obtenida es la esperada o no. En los siguientes puntos se detalla cómo se han diseñado y programado las correspondientes suites.
\par
\subsection{Implementación y realización de las pruebas}
\par
\subsubsection{Implementación de las pruebas}
\par
La implementación de las pruebas se ha hecho creando suites de pruebas para SELENIUM IDE. Aunque al hacerse al estilo de pruebas de caja negra se han diseñado independientes al código, sí que habrá que tener en cuenta que pequeños incrementos pueden requerir de un cambio en la programación de las pruebas. El ejemplo más claro qeu podemos encontrarnos aquí, es que si en un primer paso queremos acceder en local, la suite de pruebas buscará la dirección \verb|http://localhost:8080| mientras que en un paso a remoto, la suite de pruebas debería buscar en una ubicación concreta que ya no sería esa, evidentemente.
\par
La versión de este sistema no ha sido aceptada como válida hasta que no ha pasado correctamente todas las pruebas que han sido diseñadas y programadas.
\par
En fases futuras de desarrollo, no se deberán aceptar como válidas nuevas versiones si no se pasan todas las pruebas aquí descritas, así como las nuevas pruebas que se determinen como necesarias en ese momento. En las futuras fases, en el sistema de las fichas médicas, en la integración con el mismo, será probable que sea preciso añadir nuevas pruebas o modificar estas, pero siempre se deberán tomar estas como referencia.
\par
\subsubsection{Realización de las pruebas}
\par
Las pruebas se realizarán a cada cambio realizado en la aplicación, revertiéndose dicho cambio a una versión anterior si no se pasan las pruebas y no se consigue corregir la versión para que las pruebas sean superadas.
\par
El procedimiento para realizar la ejecución de las pruebas es el siguiente:
\begin{enumerate}
	\item Se realiza desde cero la inicialización del tracker (ver apartado \ref{inicializacion})
	\item Se levanta el servicio (ver apartado \ref{levantar})
	\item Se abre el navegador FIREFOX en la máquina donde reside el tracker. Se realizan las pruebas mediante SELENIUM IDE
	\item Se abre el navegador FIREFOX en la máquina remota, y se realizan las pruebas mediante SELENIUM IDE
	\item Se valoran los resultados
\end{enumerate}
\par
\subsection{Construcción de las pruebas}
\par
Sobre los casos de prueba descritos se han construido las siguientes pruebas. Aquí únicamente se describen, el código correspondiente a estas pruebas se adjunta a este trabajo.
\par
A continuación se muestran las pruebas que se harán para resolver cada caso, uno por uno:
\par
\begin{enumerate}
	\item \textbf{Pruebas de Acceso Administrador.}
\begin{itemize}
	\item Un administrador puede acceder como administrador con contraseña correcta: se accede con usuario admin, y contraseña correcta; se comprueba que la pantalla muestre el texto \textit{Administración}.
	\item No se puede acceder como administrador con una contraseña incorrecta: se introduce el usuario admin y contraseña incorrecta; se comprueba que la pantalla muestre el texto \textit{nombre de usuario o contraseña inválidos}.
	\item No se puede acceder como administrador con una contraseña nula: se introduce el usuario admin sin contraseña; se comprueba que la pantalla muestre el texto \textit{nombre de usuario o contraseña inválidos}.
	\item No se puede acceder sin login y password: no se introduce ningun usuario ni contraseña; se comprueba que la pantalla muestre el texto \textit{nombre de usuario o contraseña inválidos}.
\end{itemize}
	\item \textbf{Pruebas de Administración.} 
\begin{itemize}
	\item Un administrador puede listar clases: un usuario accede como usuario admin con contraseña correcta; a continuación sigue el link \textit{lista de clases}; se comprueba que aparece el texto \textit{lista de clases}.
	\item Un administrador puede listar usuarios: un usuario accede como usuario admin con contraseña correcta; a continuación sigue el link \textit{lista de usuarios}; se comprueba que aparece el texto \textit{lista de usuarios}.
	\item Un administrador puede crear un usuario: un usuario accede como usuario admin con contraseña correcta; a continuación sigue el link \textit{agregar usuario}; introduce los datos mínimos para crear un usuario; comprueba que aparece el texto \textit{creado}; sigue el  link \textit{lista de usuarios};comprueba que el usuario existe.
	\item Se puede crear más de un usuario: un usuario accede como usuario admin con contraseña correcta; a continuación sigue el link \textit{agregar usuario}; introduce los datos mínimos para crear un usuario (distintos al anterior); comprueba que aparece el texto \textit{creado}; sigue el  link \textit{lista de usuarios};comprueba que el usuario existe.
	\item No se puede crear un usuario ya existente: un usuario accede como usuario admin con contraseña correcta; a continuación sigue el link \textit{agregar usuario}; introduce los datos mínimos para crear un usuario (igual al anterior); comprueba que aparece el texto \textit{Error: node with key}.
	\item Un administrador puede editar un usuario: un usuario accede como usuario admin con contraseña correcta; a continuación sigue el link \textit{agregar usuario};introduce los datos mínimos para crear un usuario (distinto a los anteriores); sale del sistema y vuelve a acceder; lista los usuarios; elige el usuario recien creado; cambia el nombre; se comprueba que aparece el texto \textit{Edición exitosa}.
\end{itemize}
	\item \textbf{Pruebas de Usuario. }Previamente a la realización de estas pruebas, se crean tres usuarios solo para las pruebas: tom, dick y harry.
\begin{itemize}
	\item Un usuario puede acceder, y accede como usuario no administrador: el usuario tom accede con el login y el password correcto; se comprueba que aparece el texto \textit{Hola, tom}; se repite el mismo procedimiento con los tres usuarios de prueba.
	\item Un usuario no puede listar clases:un usuario accede como usuario normal con contraseña correcta; a continuación sigue el link \textit{lista de usuarios}; se comprueba que no aparece el texto \textit{lista de clases}.
	\item Un usuario sí puede listar usuarios:un usuario accede como usuario normal con contraseña correcta; se comprueba que no aparece el texto \textit{lista de usuarios}.
	\item Un usuario no puede crear usuarios: un usuario accede como usuario normal con contraseña correcta; a continuación sigue el link \textit{lista de usuarios}; se comprueba que no aparece el texto \textit{agregar usuario}.
\end{itemize}
	\item \textbf{Pruebas de creación de Issues.}
\begin{itemize}
	\item Un usuario puede crear un issue: el usuario tom accede con password correcto; crea un issue sin asignar.
	\item Un usuario puede crear otro issue: el usuario tom accede con password correcto; crea un issue asignado a dick.
	\item Otro usuario puede ver los issues creados.el usuario dick accede con password correcto; sigue el vinculo \textit{mostrar todos};se comprueba que están presentes los textos correspondientes a los nombres de los issues antes creados; sigue el vínculo \textit{sus issues}; se comprueba que está presente el issue que le fue asignado.
\end{itemize}
	\item \textbf{Pruebas de manipulación de Issues.}  
\begin{itemize}
	\item Un usuario puede reasignar un issue: el usuario dick accede con password correcto; sigue el vínculo \textit{sus issues}; escoge el issue que tiene asignado; cambia la asignación al usuario harry; se comprueba que aparezca el texto \textit{Edición existosa}
	\item Un usuario puede cambiar la prioridad de un issue: el usuario harry accede con password correcto; sigue el vínculo \textit{sus issues}; escoge el issue que tiene asignado; cambia la prioridad; se comprueba que aparezca el texto \textit{Edición existosa}
	\item Un usuario puede cambiar el estado de un issue: el usuario harry accede con password correcto; sigue el vínculo \textit{sus issues}; escoge el issue que tiene asignado; cambia el estado a \textit{resuelto}; se comprueba que aparezca el texto \textit{Edición existosa}; se sigue el vinculo \textit{mostrar todos}; se comprueba que el issue ya no está; se sigue el vinculo buscar; se elige estado \textit{resuelto}; se comprueba que ahí sí aparece el issue; se accede al issue; se cambia el estado a \textit{in-progress}.
	\item Un usuario puede cambiar el contenido de un issue: el usuario harry accede con password correcto; sigue el vinculo \textit{sus issues}; escoge el issue que tiene asignado; añade un mensaje; se comprueba que aparezca el texto \textit{Edición existosa}; se comprueba que está presente el texto del mensaje.
	\item Un usuario puede examinar todas las acciones realizadas con un issue: el usuario harry accede con password correcto; sigue el vinculo \textit{sus issues}; escoge el issue que tiene asignado; se comprueba que aparezca el texto \textit{crea}; se comprueba que aparezca el texto \textit{asignadoa: dick -> harry}; se comprueba que aparezca el texto \textit{prioridad: urgent -> wish}; se comprueba que aparezca el texto \textit{estado: unread -> resolved}; se comprueba que aparezca el texto \textit{estado: resolved -> in-progress}; se comprueba que aparezca el texto \textit{mensajes: +msg}.
\end{itemize}
\end{enumerate}











\par
\subsubsection{Aclaración sobre la realización de prueba final}
\par
Para la correcta verificación tanto de la aplicación como de manuales, instalables, etc, cuando se determina por concluido el proyecto, se procede a una desinstalación desde cero, y reinstalación siguiendo paso por paso las instrucciones de los manuales, etc.
\par
Una vez completada esta reinstalación, se repiten los pasos indicados en el apartado anterior, dándose por buena y definitiva la versión al pasarse las pruebas bajo estas condiciones.

\subsection{Observación sobre las pruebas}
\par
Hay que hacer una pequeña observación sobre las pruebas. Éstas han sido realizadas con intención de comprobar si se satisfacen los requisitos y alcance descritos en el apartado \ref{alcance} y el apartado \ref{requisitos}. 
\par
No obstante, las pruebas se han realizado en un entorno hardware concreto (Ordenadores personales) y desde un navegador concreto (FIREFOX). En futuras lineas de desarrollo, se deberá tener en cuenta que las pruebas deberán adaptarse a los entornos en que se esté trabajando. Por ejemplo, cuando si se diseña una interfaz concreta para las MDA, deberán hacerse pruebas en las MDA, etc.
